## Задание: Создание консольного приложения для CRM-системы учебного центра

### Описание задачи  
Разработайте **консольное приложение** на базе **.NET 9** для управления учебным процессом с использованием **Dapper** и **PostgreSQL**. Приложение должно обеспечивать полный цикл работы с данными о студентах, группах, курсах и наставниках, включая распределение студентов по группам, отслеживание успеваемости и ведение информации о наставниках.

---

### 1. База данных

Создайте базу данных PostgreSQL с пятью основными таблицами:

1. **`Students` (Студенты):**  
   - `StudentId` (int, PK) — уникальный идентификатор студента.  
   - `FullName` (varchar(150)) — полное имя студента.  
   - `Email` (varchar(150)) — адрес электронной почты.  
   - `Phone` (varchar(20)) — номер телефона.  
   - `EnrollmentDate` (date) — дата зачисления.  

2. **`Courses` (Курсы):**  
   - `CourseId` (int, PK) — уникальный идентификатор курса.  
   - `Title` (varchar(200)) — название курса.  
   - `Description` (text) — описание курса.  
   - `DurationWeeks` (int) — длительность курса в неделях.  

3. **`Mentors` (Наставники):**  
   - `MentorId` (int, PK) — уникальный идентификатор наставника.  
   - `FullName` (varchar(150)) — полное имя наставника.  
   - `Email` (varchar(150)) — адрес электронной почты.  
   - `Phone` (varchar(20)) — номер телефона.  
   - `Specialization` (varchar(100)) — специализация наставника.  

4. **`Groups` (Группы):**  
   - `GroupId` (int, PK) — уникальный идентификатор группы.  
   - `GroupName` (varchar(100)) — название группы.  
   - `CourseId` (int, FK -> Courses.CourseId) — идентификатор курса, к которому привязана группа.  
   - `MentorId` (int, FK -> Mentors.MentorId) — наставник группы.  
   - `StartDate` (date) — дата начала занятий.  
   - `EndDate` (date) — дата окончания занятий.  

5. **`StudentGroups` (Связь студентов и групп):**  
   - `StudentGroupId` (int, PK) — уникальный идентификатор записи.  
   - `StudentId` (int, FK -> Students.StudentId) — идентификатор студента.  
   - `GroupId` (int, FK -> Groups.GroupId) — идентификатор группы.  
   - `Status` (varchar(50)) — статус студента в группе (Активен, Отчислен, Завершил).  

---

### 2. Функциональные требования  

**Управление студентами (`Students`):**  
- **Добавление студента** – ввод данных нового студента и сохранение записи в базе.  
- **Просмотр списка студентов** – вывод всех студентов в консоль.  
- **Детальный просмотр** – получение информации о конкретном студенте.  
- **Редактирование** – обновление данных студента.  
- **Удаление** – удаление записи о студенте, если он не состоит в группе.  

**Управление курсами (`Courses`):**  
- **Добавление курса** – ввод информации о курсе.  
- **Просмотр списка курсов** – отображение всех доступных курсов.  
- **Детальный просмотр** – получение информации о конкретном курсе.  
- **Редактирование курса** – обновление информации.  
- **Удаление курса** – только если нет связанных групп.  

**Управление наставниками (`Mentors`):**  
- **Добавление наставника** – ввод данных о новом наставнике.  
- **Просмотр наставников** – вывод списка всех наставников.  
- **Детальный просмотр** – информация о наставнике.  
- **Редактирование** – обновление данных наставника.  
- **Удаление** – только если наставник не прикреплен к группе.  

**Управление группами (`Groups`):**  
- **Создание группы** – ввод названия, курса и наставника.  
- **Просмотр списка групп** – вывод всех учебных групп.  
- **Детальный просмотр** – получение информации о конкретном группе.  
- **Редактирование** – обновление информации.  
- **Удаление** – если в группе нет студентов.  

**Управление распределением студентов (`StudentGroups`):**  
- **Добавление студента в группу** – привязка студента к группе.  
- **Просмотр списка студентов в группе**.  
- **Обновление статуса студента в группе** (например, "Завершил" или "Отчислен").  
- **Удаление студента из группы**.  

---

### 3. Требования к реализации  

- **Используемые технологии:**  
  - **.NET 9** — для консольного приложения.  
  - **Dapper** — для работы с базой данных.  
  - **Npgsql** — для подключения к PostgreSQL.  

---

### 4. SQL-запросы и их размещение  

Реализуйте SQL-запросы в **соответствующих сервисах** в вашем .NET-приложении.  

---

#### **4.1. Общие запросы (разместить в `StatisticsService.cs`)**  
Этот сервис отвечает за получение общей статистики по системе.  

- **Метод:** `GetTotalStudentsCount()`  
  - Получает общее количество студентов в учебном центре.  

- **Метод:** `GetTotalGroupsCount()`  
  - Получает общее количество уникальных групп.  

- **Метод:** `GetTotalCoursesCount()`  
  - Определяет количество различных курсов.  

- **Метод:** `GetTotalMentorsCount()`  
  - Выводит количество наставников, зарегистрированных в системе.  

- **Метод:** `GetAllStartDates()`  
  - Возвращает список всех уникальных дат начала занятий.  

---

#### **4.2. Запросы для работы со студентами (разместить в `StudentService.cs`)**  
Этот сервис управляет студентами:  

- **Метод:** `GetStudentsWithGroups()`  
  - Выводит всех студентов с указанием их групп.  

- **Метод:** `GetStudentsWithoutGroups()`  
  - Возвращает список студентов, которые не записаны ни в одну группу.  

- **Метод:** `GetDroppedOutStudents()`  
  - Выдает список студентов со статусом "Отчислен".  

- **Метод:** `GetGraduatedStudents()`  
  - Показывает студентов, у которых курс уже завершился.  

---

#### **4.3. Запросы для работы с группами (разместить в `GroupService.cs`)**  
Этот сервис управляет учебными группами:  

- **Метод:** `GetStudentsPerGroup()`  
  - Определяет количество студентов в каждой группе.  

- **Метод:** `GetEmptyGroups()`  
  - Выдает список групп, в которых нет студентов.  

---

#### **4.4. Запросы для работы с курсами (разместить в `CourseService.cs`)**  
Этот сервис управляет курсами:  

- **Метод:** `GetStudentsPerCourse()`  
  - Определяет количество студентов в каждом курсе.  

- **Метод:** `GetMostPopularCourse()`  
  - Показывает курс с наибольшим количеством студентов.  

- **Метод:** `GetLeastPopularCourses()`  
  - Выводит три курса с наименьшим количеством студентов.  

- **Метод:** `GetTopThreeCourses()`  
  - Возвращает три самых популярных курса.  

---

#### **4.5. Запросы для работы с наставниками (разместить в `MentorService.cs`)**  
Этот сервис управляет наставниками:  

- **Метод:** `GetMentorWithMostStudents()`  
  - Выводит наставника, у которого больше всего студентов.  

- **Метод:** `GetMentorsWithMultipleCourses()`  
  - Определяет наставников, ведущих более одного курса.  

---

#### **4.6. Запросы для расчета статистики (разместить в `AnalyticsService.cs`)**  
Этот сервис выполняет анализ учебного процесса:  

- **Метод:** `GetCompletionRate()`  
  - Определяет процент студентов, завершивших обучение.  

---

### 5. Пример данных  

Вот 10 записей для каждой таблицы в **CRM-системе учебного центра**:

```sql
-- Добавление курсов
INSERT INTO Courses (Title, Description, DurationWeeks)
VALUES 
('Программирование на C#', 'Курс по основам C# и .NET', 12),
('Web-разработка', 'Frontend и Backend разработка', 16),
('Data Science', 'Основы анализа данных и машинного обучения', 14),
('UI/UX Дизайн', 'Проектирование пользовательского интерфейса', 10),
('DevOps', 'Автоматизация и CI/CD процессы', 8),
('Мобильная разработка', 'Разработка приложений для iOS и Android', 12),
('Кибербезопасность', 'Основы защиты информации', 10),
('Game Development', 'Создание игр на Unity и Unreal Engine', 20),
('Базы данных', 'Проектирование и оптимизация SQL и NoSQL', 12),
('Cloud Computing', 'Работа с AWS, Azure и Google Cloud', 16);

-- Добавление наставников
INSERT INTO Mentors (FullName, Email, Phone, Specialization)
VALUES 
('Иван Иванов', 'ivanov@example.com', '1234567890', 'C#'),
('Мария Смирнова', 'smirnova@example.com', '0987654321', 'Web-разработка'),
('Александр Кузнецов', 'kuznetsov@example.com', '7778889990', 'Data Science'),
('Светлана Орлова', 'orlova@example.com', '5551234567', 'UI/UX Дизайн'),
('Дмитрий Федоров', 'fedorov@example.com', '9998887776', 'DevOps'),
('Ольга Николаева', 'nikolaeva@example.com', '4445556667', 'Мобильная разработка'),
('Анастасия Лебедева', 'lebedeva@example.com', '3334445556', 'Кибербезопасность'),
('Виктор Петров', 'petrov@example.com', '1112223334', 'Game Development'),
('Екатерина Морозова', 'morozova@example.com', '8887776665', 'Базы данных'),
('Сергей Васильев', 'vasiliev@example.com', '2223334445', 'Cloud Computing');

-- Добавление групп
INSERT INTO Groups (GroupName, CourseId, MentorId, StartDate, EndDate)
VALUES 
('C# Базовый', 1, 1, '2024-03-01', '2024-06-01'),
('Web-разработка 2024', 2, 2, '2024-04-01', '2024-08-01'),
('Data Science Pro', 3, 3, '2024-05-01', '2024-09-01'),
('UI/UX Дизайн 2024', 4, 4, '2024-06-01', '2024-08-10'),
('DevOps 2024', 5, 5, '2024-07-01', '2024-09-30'),
('Мобильная разработка iOS', 6, 6, '2024-05-15', '2024-09-15'),
('Cyber Security 101', 7, 7, '2024-06-20', '2024-09-20'),
('Game Dev Unity', 8, 8, '2024-07-05', '2024-12-05'),
('SQL & NoSQL', 9, 9, '2024-08-01', '2024-10-01'),
('Cloud Tech Experts', 10, 10, '2024-09-01', '2024-12-01');

-- Добавление студентов
INSERT INTO Students (FullName, Email, Phone, EnrollmentDate)
VALUES 
('Александр Петров', 'petrov@example.com', '7778889990', '2024-02-15'),
('Екатерина Соколова', 'sokolova@example.com', '1112223334', '2024-03-10'),
('Дмитрий Иванов', 'ivanov_d@example.com', '9991112223', '2024-01-20'),
('Ольга Смирнова', 'smirnova_o@example.com', '5556667778', '2024-02-28'),
('Сергей Федоров', 'fedorov_s@example.com', '3332221110', '2024-04-05'),
('Марина Орлова', 'orlova_m@example.com', '7775553332', '2024-03-15'),
('Артем Кузнецов', 'kuznetsov_a@example.com', '6669998887', '2024-05-01'),
('Наталья Лебедева', 'lebedeva_n@example.com', '4443332226', '2024-06-10'),
('Игорь Васильев', 'vasiliev_i@example.com', '1114445557', '2024-07-20'),
('Виктория Морозова', 'morozova_v@example.com', '2225558884', '2024-08-05');

-- Запись студентов в группы
INSERT INTO StudentGroups (StudentId, GroupId, Status)
VALUES 
(1, 1, 'Активен'),
(2, 1, 'Активен'),
(3, 2, 'Завершил'),
(4, 2, 'Активен'),
(5, 3, 'Отчислен'),
(6, 4, 'Активен'),
(7, 5, 'Активен'),
(8, 5, 'Завершил'),
(9, 6, 'Активен'),
(10, 7, 'Отчислен'),
(1, 8, 'Активен'),
(3, 9, 'Активен'),
(4, 10, 'Завершил'),
(6, 7, 'Активен'),
(8, 3, 'Активен');
```